(()=>{"use strict";var e={649:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Board=void 0;const i=s(802),r=s(265),n=s(773),o=s(102),a=s(154),l=s(29),h=s(783),d=s(494),u=s(677),c=s(905),m=s(55),C=s(489),v=s(426),M=s(669),T=s(300);class g extends a.DOMEntity{_CellByAddress=new Map;_Figures=new M.List;Turn=o.ETeam.White;SelectionBox=new v.SelectionBox;GPT=new n.ChessGPT;constructor(){super(),this.CreateFieldCells(),this.DOMElement.appendChild(this.SelectionBox.DOMElement)}SetupDOMElement(e){e.classList.add("field")}CreateFieldCells(){for(var e=0;e<8;e++)for(var t=0;t<8;t++){var s=new i.Cell;s.Team=(e+t)%2==0?o.ETeam.White:o.ETeam.Black,this.DOMElement.append(s.DOMElement);var r=g.PositionToAddress(new T.Vector2(t,e));s.Address=r,this._CellByAddress.set(r,s)}}ResetBoard(){this.ClearBoard(),this.CreateFigureAtAddress(C.Tower,o.ETeam.Black,"A8"),this.CreateFigureAtAddress(u.Knight,o.ETeam.Black,"B8"),this.CreateFigureAtAddress(l.Bishop,o.ETeam.Black,"C8"),this.CreateFigureAtAddress(m.Queen,o.ETeam.Black,"D8"),this.CreateFigureAtAddress(d.King,o.ETeam.Black,"E8"),this.CreateFigureAtAddress(l.Bishop,o.ETeam.Black,"F8"),this.CreateFigureAtAddress(u.Knight,o.ETeam.Black,"G8"),this.CreateFigureAtAddress(C.Tower,o.ETeam.Black,"H8");for(var e=0;e<8;e++)this.CreateFigureAtPosition(c.Pawn,o.ETeam.Black,new T.Vector2(e,1));for(this.CreateFigureAtAddress(C.Tower,o.ETeam.White,"A1"),this.CreateFigureAtAddress(u.Knight,o.ETeam.White,"B1"),this.CreateFigureAtAddress(l.Bishop,o.ETeam.White,"C1"),this.CreateFigureAtAddress(m.Queen,o.ETeam.White,"D1"),this.CreateFigureAtAddress(d.King,o.ETeam.White,"E1"),this.CreateFigureAtAddress(l.Bishop,o.ETeam.White,"F1"),this.CreateFigureAtAddress(u.Knight,o.ETeam.White,"G1"),this.CreateFigureAtAddress(C.Tower,o.ETeam.White,"H1"),e=0;e<8;e++)this.CreateFigureAtPosition(c.Pawn,o.ETeam.White,new T.Vector2(e,6));this.GPT.AddMessage(n.EChatGPTRole.System,"Let's play chess. Tell me your moves in pairs of cell you move from and to. You play as Black.")}ClearBoard(){for(var e of this._Figures)e.Destroy();this.GPT.Reset()}GetCellByAddress(e){return this._CellByAddress.get(e)}GetCellByPosition(e){var t=g.PositionToAddress(e);return this.GetCellByAddress(t)}CreateFigureAtAddress(e,t,s){var i=new e,r=this.GetCellByAddress(s);if(r)return i.MoveToCell(r),i.Team=t,i;console.warn(`CreateFigureAtAddress -- Cell ${s} doesn't exit.`)}CreateFigureAtPosition(e,t,s){return this.CreateFigureAtAddress(e,t,g.PositionToAddress(s))}static PositionToAddress(e){return String.fromCharCode(65+e.X)+""+(8-e.Y)}static AddressToPosition(e){var t=e.charCodeAt(0)-65,s=8-Number(e[1]);return new T.Vector2(t,s)}CanPlayerMove(){return this.Turn==o.ETeam.White}CanBotMove(){return this.Turn==o.ETeam.Black}SelectedFigure;async TrySelect(e){this.CanPlayerMove()&&e.IsOwnedByPlayer()&&(this.ClearSelection(),this.SelectedFigure=e,this.SelectionBox.MoveTo(e),e.FindValidCellsToMove())}ClearSelection(){this.SelectedFigure=null,r.g_Globals.Game.InvokeMethodOnEntitiesOfType(i.Cell,(e=>e.SetHighlightForSelection),!1)}OnFigureMoved(e,t,s){if(t&&s){if(e.IsOwnedByPlayer()){this.SendBoardStateToChatGPT();var i=s.Figure,o=`I move ${e} from ${t.Address} to ${s.Address}.`;i&&(o+=` (I captured your ${i} at ${s.Address})`),r.g_Globals.Game.Board.GPT.AddMessage(n.EChatGPTRole.User,o)}this.SwitchTurns()}}SwitchTurns(){var e=this.Turn==o.ETeam.Black?o.ETeam.White:o.ETeam.Black;console.log(`${o.ETeam[e]} turn!`),this.Turn=e,e==o.ETeam.Black&&this.QueryResponseFromChatGPT()}SendBoardStateToChatGPT(){var e=`Current pieces on the board: ${r.g_Globals.Game.Entities.Filter((e=>e instanceof h.Figure)).map((e=>`${e} at ${e.Cell.Address}`)).join(", ")}`;this.GPT.AddMessage(n.EChatGPTRole.System,e)}async QueryResponseFromChatGPT(){var e=(await this.GPT.GenerateCompletion()).match(/[A-Za-z][0-9]/g),t=e[e.length-2].toUpperCase(),s=e[e.length-1].toUpperCase(),i=this.GetCellByAddress(t),r=this.GetCellByAddress(s);if(!i||!r)return this.GPT.AddMessage(n.EChatGPTRole.User,"The cells you provided do not exist."),void this.QueryResponseFromChatGPT();var o=i.Figure;return o?Array.from(o.GenerateCellsToMove()).includes(r)?(o.MoveToCell(r),void console.log(`ChatGPT moved ${o} from ${t} to ${s}`)):(this.GPT.AddMessage(n.EChatGPTRole.User,"Your last move is impossible."),void this.QueryResponseFromChatGPT()):(this.GPT.AddMessage(n.EChatGPTRole.User,`There's no chess piece on ${t}.`),void this.QueryResponseFromChatGPT())}}t.Board=g},802:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;const i=s(649),r=s(265),n=s(102),o=s(154);class a extends o.DOMEntity{Team;Address;get Position(){return i.Board.AddressToPosition(this.Address)}Figure;SelectedCanMoveToThis=!1;constructor(){super(),this.BindClass("white",(()=>this.Team==n.ETeam.White)),this.BindClass("black",(()=>this.Team==n.ETeam.Black)),this.BindClass("highlight",(()=>this.SelectedCanMoveToThis))}SetupDOMElement(e){e.classList.add("cell")}SetHighlightForSelection(e){this.SelectedCanMoveToThis=e}OnClick(e){this.SelectedCanMoveToThis&&(r.g_Globals.Game.Board.SelectedFigure.MoveToCell(this),r.g_Globals.Game.Board.ClearSelection())}}t.Cell=a},265:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.g_Globals=void 0;const i=s(649),r=s(669);function n(e){requestAnimationFrame((t=>{n(e.bind(this)),e.call(this,t)}))}t.g_Globals={},t.Chess=class{Container;Instance;Entities=new r.List;Board;constructor(){t.g_Globals.Game=this,n(this.OnAnimationFrame.bind(this)),this.Container=document.querySelector("#game_container"),this.Board=new i.Board,this.Container.appendChild(this.Board.DOMElement),requestAnimationFrame(this.StartGame.bind(this))}StartGame(){this.Board.ResetBoard()}OnAnimationFrame(e){for(var s of(t.g_Globals.Time=e/1e3,this.Entities))s.InvokeFrame()}InvokeMethodOnEntitiesOfType(e,t,...s){for(var i of this.Entities)i instanceof e&&t(i).call(i,...s)}}},773:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChatGPTMessage=t.EChatGPTRole=t.ChessGPT=void 0;const i=s(669);var r;t.ChessGPT=class{_MessageHistory=new i.List;_DOM;_ApiInput;constructor(){this._DOM=document.querySelector(".chatlog .messages"),this._ApiInput=document.querySelector("#gpt_api_key")}Reset(){this._MessageHistory.Clear(),this._DOM.innerHTML=""}AddMessage(e,t){var s=new n;s.Role=e,s.Content=t,this._MessageHistory.Add(s);var i=document.createElement("div");i.classList.add("message");var o="";switch(e){case r.Assistant:o="https://gptapk.com/wp-content/uploads/2023/02/chatgpt-icon.png";break;case r.User:o="https://avatars.cloudflare.steamstatic.com/61269e2108073315ae031cc517fcc5a86418b450_full.jpg",i.classList.add("player");break;case r.System:o="https://files.softicons.com/download/application-icons/free-flat-icons-by-grafikartes/ico/systemPreferences.ico",i.classList.add("system")}i.innerHTML=`\n        <div class="avatar">\n            <img src="${o}" />\n        </div>\n        <div class="text">${t}</div>\n        `,this._DOM.prepend(i)}async GenerateCompletion(){var e={model:"gpt-3.5-turbo",temperature:1,messages:[]};for(var t of this._MessageHistory){var s=r[t.Role].toLocaleLowerCase();e.messages.push({role:s,content:t.Content})}var i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._ApiInput.value}`},body:JSON.stringify(e)}),n=await i.json();if(n.error)return alert(n.error.message),console.error(n.error.message),"";var o=n.choices[0].message.content;return this.AddMessage(r.Assistant,o),o}},function(e){e[e.User=0]="User",e[e.System=1]="System",e[e.Assistant=2]="Assistant"}(r=t.EChatGPTRole||(t.EChatGPTRole={}));class n{Role;Content}t.ChatGPTMessage=n},102:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.Position=t.ETeam=void 0,(s=t.ETeam||(t.ETeam={}))[s.White=0]="White",s[s.Black=1]="Black",t.Position=class{X;Y}},154:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DOMEntity=void 0;const i=s(265);t.DOMEntity=class{DOMElement;Bindings=new Map;constructor(){i.g_Globals.Game.Entities.Add(this),this.DOMElement=document.createElement("div"),this.SetupDOMElement(this.DOMElement),this.SetupElementListeners(this.DOMElement)}_NextClassBindingEvaluate=0;EvaluateClassBindings(){if(!(i.g_Globals.Time<this._NextClassBindingEvaluate))for(var e of(this._NextClassBindingEvaluate=i.g_Globals.Time+.1,this.Bindings)){var t=e[0];e[1].call(this)?this.DOMElement.classList.add(t):this.DOMElement.classList.remove(t)}}InvokeFrame(){this.Frame(),this.EvaluateClassBindings()}Frame(){}SetupDOMElement(e){}BindClass(e,t){this.Bindings.set(e,t)}Destroy(){this.DOMElement.remove(),i.g_Globals.Game.Entities.Remove(this)}SetupElementListeners(e){e.addEventListener("click",(e=>this.OnClick(e))),e.addEventListener("dblclick",(e=>this.OnDoubleClick(e))),e.addEventListener("contextmenu",(e=>this.OnContextMenu(e))),e.addEventListener("mouseover",(e=>this.OnMouseOver(e))),e.addEventListener("mouseout",(e=>this.OnMouseOut(e))),e.addEventListener("mousedown",(e=>this.OnMouseDown(e))),e.addEventListener("mouseenter",(e=>this.OnMouseEnter(e))),e.addEventListener("mouseleave",(e=>this.OnMouseLeave(e))),e.addEventListener("mousemove",(e=>this.OnMouseMove(e))),e.addEventListener("mouseup",(e=>this.OnMouseUp(e))),e.addEventListener("touchstart",(e=>this.OnTouchStart(e))),e.addEventListener("touchmove",(e=>this.OnTouchMove(e))),e.addEventListener("touchend",(e=>this.OnTouchEnd(e))),e.addEventListener("touchcancel",(e=>this.OnTouchCancel(e)))}OnMouseDown(e){}OnMouseUp(e){}OnMouseOver(e){}OnMouseOut(e){}OnMouseEnter(e){}OnMouseLeave(e){}OnMouseMove(e){}OnClick(e){}OnDoubleClick(e){}OnContextMenu(e){}OnTouchStart(e){}OnTouchMove(e){}OnTouchEnd(e){}OnTouchCancel(e){}}},29:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Bishop=void 0;const i=s(653),r=s(783);class n extends r.Figure{constructor(){super(),this.Name="Bishop"}SetupDOMElement(e){super.SetupDOMElement(e),e.classList.add("bishop")}*GenerateCellsToMove(){yield*i.Tracer.StartAt(this.Cell,this.Team).MoveUpLeft(i.MAX_CELLS).Reset().MoveUpRight(i.MAX_CELLS).Reset().MoveDownLeft(i.MAX_CELLS).Reset().MoveDownRight(i.MAX_CELLS).Reset().YieldTracedCells()}}t.Bishop=n},783:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EDistanceType=t.Figure=void 0;const i=s(265),r=s(102),n=s(154);class o extends n.DOMEntity{Team=0;Cell;Name="<undefined>";MoveTimes=0;constructor(){super(),this.BindClass("white",(()=>this.Team==r.ETeam.White)),this.BindClass("black",(()=>this.Team==r.ETeam.Black)),this.BindClass("clickable",(()=>i.g_Globals.Game.Board.Turn==this.Team&&this.IsOwnedByPlayer())),i.g_Globals.Game.Board.DOMElement.appendChild(this.DOMElement)}SetupDOMElement(e){e.classList.add("figure")}MoveToCell(e){this.MoveTimes++;var t=this.Cell,s=e;if(this.OnMoved(t,s),i.g_Globals.Game.Board.OnFigureMoved(this,t,s),this.Cell&&(this.Cell.Figure=null,this.Cell=null),e){this.Cell=e;var r=e.Figure;r?.Destroy(),this.Cell.Figure=this;var n=e.Position;this.DOMElement.style.left=12.5*n.X+"%",this.DOMElement.style.top=12.5*n.Y+"%"}}OnMoved(e,t){}OnClick(e){i.g_Globals.Game.Board.TrySelect(this)}IsOwnedByPlayer(){return this.Team==r.ETeam.White}IsOwnedByBot(){return this.Team==r.ETeam.Black}CanMoveToCell(e){return!1}*GenerateCellsToMove(){return[]}FindValidCellsToMove(){for(var e of this.GenerateCellsToMove())e.SetHighlightForSelection(!0)}toString(){return`${r.ETeam[this.Team]} ${this.Name}`}}var a;t.Figure=o,(a=t.EDistanceType||(t.EDistanceType={}))[a.Vertical=0]="Vertical",a[a.Horizontal=1]="Horizontal",a[a.Diagonal=2]="Diagonal"},494:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.King=void 0;const i=s(653),r=s(783);class n extends r.Figure{constructor(){super(),this.Name="King"}SetupDOMElement(e){super.SetupDOMElement(e),e.classList.add("king")}*GenerateCellsToMove(){yield*i.Tracer.StartAt(this.Cell,this.Team).MoveUp().Reset().MoveDown().Reset().MoveLeft().Reset().MoveRight().Reset().MoveUpLeft().Reset().MoveUpRight().Reset().MoveDownLeft().Reset().MoveDownRight().Reset().YieldTracedCells()}}t.King=n},677:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Knight=void 0;const i=s(653),r=s(300),n=s(783);class o extends n.Figure{constructor(){super(),this.Name="Knight"}SetupDOMElement(e){super.SetupDOMElement(e),e.classList.add("knight")}*GenerateCellsToMove(){for(var e=0;e<4;e++){var t=Math.PI*e/2,s=Math.round(Math.cos(t)),n=Math.round(Math.sin(t)),o=new r.Vector2(s,n),a=new r.Vector2(n,-s),l=i.Tracer.StartAt(this.Cell,this.Team).WithCollisions(!1).Move(o.Scale(2)).Move(a);yield*this.GetCellsFromCurvedTrace(l);var h=new r.Vector2(-n,s),d=i.Tracer.StartAt(this.Cell,this.Team).WithCollisions(!1).Move(o.Scale(2)).Move(h);yield*this.GetCellsFromCurvedTrace(d)}}*GetCellsFromCurvedTrace(e){if(!e.Error){var t=e.Cell;t.Figure&&t.Figure.Team==this.Team||(yield t)}}}t.Knight=o},905:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Pawn=void 0;const i=s(265),r=s(102),n=s(653),o=s(783),a=s(55);class l extends o.Figure{constructor(){super(),this.Name="Pawn"}SetupDOMElement(e){super.SetupDOMElement(e),e.classList.add("pawn")}*GenerateCellsToMove(){var e=1==this.MoveTimes?2:1;yield*n.Tracer.StartAt(this.Cell,this.Team).CanContestEnemyCells(!1).MoveUp(e).YieldTracedCells();var t=n.Tracer.StartAt(this.Cell,this.Team).MoveUpLeft().Reset().MoveUpRight().Reset().YieldTracedCells();for(var s of t)s.Figure&&s.Figure.Team!=this.Team&&(yield s)}OnMoved(e,t){var s=this.Team==r.ETeam.Black?7:0;t.Position.Y==s&&setTimeout((()=>{i.g_Globals.Game.Board.CreateFigureAtAddress(a.Queen,this.Team,t.Address),this.Destroy()}),100)}}t.Pawn=l},55:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Queen=void 0;const i=s(653),r=s(783);class n extends r.Figure{constructor(){super(),this.Name="Queen"}SetupDOMElement(e){super.SetupDOMElement(e),e.classList.add("queen")}*GenerateCellsToMove(){yield*i.Tracer.StartAt(this.Cell,this.Team).MoveUp(i.MAX_CELLS).Reset().MoveDown(i.MAX_CELLS).Reset().MoveLeft(i.MAX_CELLS).Reset().MoveRight(i.MAX_CELLS).Reset().MoveUpLeft(i.MAX_CELLS).Reset().MoveUpRight(i.MAX_CELLS).Reset().MoveDownLeft(i.MAX_CELLS).Reset().MoveDownRight(i.MAX_CELLS).Reset().YieldTracedCells()}}t.Queen=n},489:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tower=void 0;const i=s(653),r=s(783);class n extends r.Figure{constructor(){super(),this.Name="Tower"}SetupDOMElement(e){super.SetupDOMElement(e),e.classList.add("tower")}*GenerateCellsToMove(){yield*i.Tracer.StartAt(this.Cell,this.Team).MoveUp(i.MAX_CELLS).Reset().MoveDown(i.MAX_CELLS).Reset().MoveLeft(i.MAX_CELLS).Reset().MoveRight(i.MAX_CELLS).Reset().YieldTracedCells()}}t.Tower=n},426:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionBox=void 0;const i=s(265),r=s(154);class n extends r.DOMEntity{constructor(){super(),this.BindClass("visible",(()=>!!i.g_Globals.Game.Board.SelectedFigure))}SetupDOMElement(e){e.classList.add("selection_box")}MoveTo(e){var t=e.Cell.Position;this.DOMElement.style.left=12.5*t.X+"%",this.DOMElement.style.top=12.5*t.Y+"%"}}t.SelectionBox=n},653:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=t.ETraceError=t.MAX_CELLS=void 0;const i=s(265),r=s(102),n=s(669),o=s(300);var a;t.MAX_CELLS=8,function(e){e[e.None=0]="None",e[e.OutOfBounds=1]="OutOfBounds",e[e.Blocked=2]="Blocked"}(a=t.ETraceError||(t.ETraceError={}));class l{Cell;Error=a.None;TracedCells=new n.List;_OriginalCell;_UseCollisions=!0;_ContestEnemyCells=!0;_Team=r.ETeam.White;_IsContestingEnemyCell=!1;static StartAt(e,t){var s=new l;return s._OriginalCell=e,s.Cell=e,s._Team=t,s}WithCollisions(e=!0){return this._UseCollisions=e,this}CanContestEnemyCells(e=!0){return this._ContestEnemyCells=e,this}MoveUp(e=1){return this.Move(o.Vector2.Up.Scale(e))}MoveDown(e=1){return this.Move(o.Vector2.Down.Scale(e))}MoveRight(e=1){return this.Move(o.Vector2.Right.Scale(e))}MoveLeft(e=1){return this.Move(o.Vector2.Left.Scale(e))}MoveUpLeft(e=1){return this.Move(new o.Vector2(-1,1).Scale(e))}MoveUpRight(e=1){return this.Move(new o.Vector2(1,1).Scale(e))}MoveDownLeft(e=1){return this.Move(new o.Vector2(-1,-1).Scale(e))}MoveDownRight(e=1){return this.Move(new o.Vector2(1,-1).Scale(e))}Move(e){if(this.Error)return this;if(0==e.Length)return this;var t=this.Cell.Position,s=o.Vector2.Zero;0!=e.X&&(s.X=e.X/Math.abs(e.X)),0!=e.Y&&(s.Y=e.Y/Math.abs(e.Y));var n=s.Copy();this._Team==r.ETeam.White&&(n.Y*=-1);var l=t.Add(n),h=i.g_Globals.Game.Board.GetCellByPosition(l);return this.Error=this.CanTraceToCell(h),this.Error!=a.None?this:(this.TracedCells.Add(h),this.Cell=h,this.Move(e.Subtract(s)))}CanTraceToCell(e){if(!e)return a.OutOfBounds;if(!this._UseCollisions)return a.None;if(this._IsContestingEnemyCell)return a.Blocked;var t=e.Figure;if(t){if(t.Team==this._Team)return a.Blocked;if(!this._ContestEnemyCells)return a.Blocked;this._IsContestingEnemyCell=!0}return a.None}CheckForCollision(e){}Reset(){return this.Cell=this._OriginalCell,this.Error=a.None,this._IsContestingEnemyCell=!1,this}*YieldTracedCells(){for(var e of this.TracedCells)yield e}}t.Tracer=l},669:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;class s{_elements=[];Add(e){this.Contains(e)||this._elements.push(e)}Remove(e){this.Contains(e)&&this.RemoveAt(this.IndexOf(e))}RemoveAt(e){this._elements.splice(e,1)}Clear(){this._elements=[]}Contains(e){return this._elements.includes(e)}IndexOf(e){return this._elements.indexOf(e)}At(e){return this._elements[e]}*[Symbol.iterator](){for(var e of this._elements)yield e}Filter(e,t){return this._elements.filter(e,t)}Copy(){var e=new s;return Object.assign(e._elements,this._elements),e}get Length(){return this._elements.length}}t.List=s},300:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;class s{X=0;Y=0;static get Zero(){return new s(0,0)}static get One(){return new s(1,1)}static get Left(){return new s(-1,0)}static get Right(){return new s(1,0)}static get Up(){return new s(0,1)}static get Down(){return new s(0,-1)}static Random(){return new s(2*Math.random()-1,2*Math.random()-1)}static FromArray(e){return new s(e[0]||0,e[1]||0)}constructor(e=0,t=0){this.X=e,this.Y=t}WithX(e){return new s(e,this.Y)}WithY(e){return new s(this.X,e)}DistanceTo(e,t=!1){var s=this.X-e.X,i=this.Y-e.Y;return t?s*s+i*i:Math.sqrt(s*s+i*i)}get Length(){return Math.sqrt(this.X*this.X+this.Y*this.Y)}Normalize(){var e=this.Length;return 0==e?new s:new s(this.X/e,this.Y/e)}WithLength(e){return this.Normalize().Scale(e)}ProjectOn(e){return this.Dot(e)/e.Length}Dot(e){return this.X*e.X+this.Y*e.Y}Add(e){return new s(this.X+e.X,this.Y+e.Y)}Scale(e){return e instanceof s?new s(this.X*e.X,this.Y*e.Y):new s(this.X*e,this.Y*e)}Divide(e){return e instanceof s?new s(this.X/e.X,this.Y/e.Y):new s(this.X/e,this.Y/e)}Subtract(e){return new s(this.X-e.X,this.Y-e.Y)}toString(){return`Vector2[${Math.round(100*this.X)/100}, ${Math.round(100*this.Y)/100}]`}IsEqual(e){return this.X==e.X&&this.Y==e.Y}IsNearlyEqual(e,t=.001){return Math.abs(this.X-e.X)<t&&Math.abs(this.Y-e.Y)<t}Min(e){return new s(Math.min(this.X,e.X),Math.min(this.Y,e.Y))}Max(e){return new s(Math.max(this.X,e.X),Math.max(this.Y,e.Y))}Lerp(e,t){return new s(this.X+(e.X-this.X)*t,this.Y+(e.Y-this.Y)*t)}Abs(){return new s(Math.abs(this.X),Math.abs(this.Y))}AngleDifference(e){return e.Angle()-this.Angle()}Angle(){return Math.atan2(this.Y,this.X)}Copy(){return new s(this.X,this.Y)}}t.Vector2=s}},t={};new(function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}(265).Chess)})();